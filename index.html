<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="keywords" content="java, imageio, bmp, jpeg, jpg, pnm, pbm, pgm, ppm, psd, tiff, tif, iff, pcx, sgi, tga, icns, ico, cur, thumbs.db, open source, bsd" />
	<meta name="description" content="TwelveMonkeys ImageIO: Additional plug-ins and extensions for Java&#39;s ImageIO. 
	Java support for the following image formats: BMP, JPEG, PNM, PSD, TIFF, IFF, PCX, SGI, TGA, ICNS, ICO, CUR and Thumbs.db.
	Open source software, BSD licensed.">
	
    <title>TwelveMonkeys ImageIO by haraldk</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
          <h1>
              <div style="display: table;">
                  <div style="display: table-cell;">
                      <img style="width: 80px; height:80px; float:left;" src="gfx/TwelveMonkeys_Icon.png">
                  </div>
                  <div style="display: table-cell; width: 190px; vertical-align: middle; padding-left: 10px;">TwelveMonkeys<br/>ImageIO</div>
              </div>
          </h1>
          <p>TwelveMonkeys ImageIO: Additional plug-ins and extensions for Java&#39;s ImageIO</p>

        <p class="view"><a href="https://github.com/haraldk/TwelveMonkeys">View the Project on GitHub <small>haraldk/TwelveMonkeys</small></a></p>


        <ul>
          <li><a href="https://github.com/haraldk/TwelveMonkeys/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/haraldk/TwelveMonkeys/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/haraldk/TwelveMonkeys">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a id="latest" class="anchor" href="#latest" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest</h2>

<p>TwelveMonkeys ImageIO 3.1.0 is released (Apr. 10th, 2015).</p>

<h2>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h2>

<p>TwelveMonkeys ImageIO is a collection of plugins and extensions for Java's ImageIO.</p>

<p>These plugins extends the number of image file formats supported in Java, using the javax.imageio.* package.
The main purpose of this project is to provide support for formats not covered by the JRE itself.</p>

<p>Support for formats is important, both to be able to read data found
"in the wild", as well as to maintain access to data in legacy formats.
Because there is lots of legacy data out there, we see the need for open implementations of readers for popular formats.
The goal is to create a set of efficient and robust ImageIO plug-ins, that can be distributed independently.</p>

<hr>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<p>Mainstream format support</p>

<h4>
<a id="ms-windowsibm-os2-device-independent-bitmap-bmp" class="anchor" href="#ms-windowsibm-os2-device-independent-bitmap-bmp" aria-hidden="true"><span class="octicon octicon-link"></span></a>MS Windows/IBM OS/2 Device Independent Bitmap (BMP) <em>3.1</em>
</h4>

<ul>
<li>Read support for all known versions of the DIB/BMP format

<ul>
<li>Indexed color, 1, 4 and 8 bit, including 4 and 8 bit RLE</li>
<li>RGB, 16, 24 and 32 bit</li>
<li>Embedded PNG and JPEG data</li>
<li>Windows and OS/2 versions</li>
</ul>
</li>
<li>Native and standard metadata format</li>
</ul>

<h4>
<a id="jpeg" class="anchor" href="#jpeg" aria-hidden="true"><span class="octicon octicon-link"></span></a>JPEG</h4>

<ul>
<li>Read support for the following JPEG "flavors":

<ul>
<li>YCbCr JPEGs without JFIF segment (converted to RGB, using embedded ICC profile)</li>
<li>CMYK JPEGs (converted to RGB by default or as CMYK, using embedded ICC profile)</li>
<li>Adobe YCCK JPEGs (converted to RGB by default or as CMYK, using embedded ICC profile)</li>
<li>JPEGs containing ICC profiles with interpretation other than 'Perceptual' or class other than 'Display'</li>
<li>JPEGs containing ICC profiles that are incompatible with stream data, corrupted ICC profiles or corrupted <code>ICC_PROFILE</code> segments</li>
<li>JPEGs using non-standard color spaces, unsupported by Java 2D</li>
<li>JPEGs with APP14/Adobe segments with length other than 14 bytes</li>
<li>8 bit JPEGs with 16 bit DQT segments</li>
<li>Issues warnings instead of throwing exceptions in cases of corrupted or non-conformant data where ever the image 
data can still be read in a reasonable way</li>
</ul>
</li>
<li>Thumbnail support:

<ul>
<li>JFIF thumbnails (even if stream contains "inconsistent metadata")</li>
<li>JFXX thumbnails (JPEG, Indexed and RGB)</li>
<li>EXIF thumbnails (JPEG, RGB and YCbCr)</li>
</ul>
</li>
<li>Metadata support:

<ul>
<li>JPEG metadata in both standard and native formats (even if stream contains "inconsistent metadata")</li>
<li>
<code>javax_imageio_jpeg_image_1.0</code> format (currently as native format, may change in the future)</li>
<li>Non-conforming combinations of JFIF, Exif and Adobe markers, using "unknown" segments in the
"MarkerSequence" tag for the unsupported segments (for <code>javax_imageio_jpeg_image_1.0</code> format)</li>
</ul>
</li>
<li>Extended write support in progress:

<ul>
<li>CMYK JPEGs</li>
<li>YCCK JPEGs</li>
</ul>
</li>
</ul>

<h4>
<a id="jpeg-2000" class="anchor" href="#jpeg-2000" aria-hidden="true"><span class="octicon octicon-link"></span></a>JPEG-2000</h4>

<ul>
<li>Possibly coming in the future, pending some license issues.</li>
</ul>

<p>If you are one of the authors, or know one of the authors and/or the current license holders of either the original
jj2000 package or the JAI ImageIO project, please contact me (I've tried to get in touch in various ways, 
without success so far).</p>

<p>Alternatively, if you have or know of a JPEG-2000 implementation in Java with a suitable license, get in touch. :-)</p>

<h4>
<a id="netpbm-portable-any-map-pnm" class="anchor" href="#netpbm-portable-any-map-pnm" aria-hidden="true"><span class="octicon octicon-link"></span></a>PNM - NetPBM Portable Any Map <em>3.1</em>
</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>PBM in 'P1' (ASCII) and 'P4' (binary) formats, 1 bit per pixel</li>
<li>PGM in 'P2' (ASCII) and 'P5' (binary) formats, up to 16/32 bits per pixel</li>
<li>PPM in 'P3' (ASCII) and 'P6' (binary) formats, up to 16/32 bits per pixel component</li>
<li>PAM in 'P7' (binary) format up to 32 bits per pixel component</li>
<li>Limited support for PFM in 'Pf' (gray) and 'PF' (RGB) formats, 32 bits floating point</li>
</ul>
</li>
<li>Write support for the following formats:

<ul>
<li>PPM in 'P6' (binary) format</li>
<li>PAM in 'P7' (binary) format</li>
</ul>
</li>
<li>Standard metadata support</li>
</ul>

<h4>
<a id="adobe-photoshop-document-psd" class="anchor" href="#adobe-photoshop-document-psd" aria-hidden="true"><span class="octicon octicon-link"></span></a>PSD - Adobe Photoshop Document</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>Monochrome, 1 channel, 1 bit</li>
<li>Indexed, 1 channel, 8 bit</li>
<li>Gray, 1 channel, 8, 16 and 32 bit</li>
<li>Duotone, 1 channel, 8, 16 and 32 bit</li>
<li>RGB, 3-4 channels, 8, 16 and 32 bit</li>
<li>CMYK, 4-5 channels, 8, 16 and 32 bit</li>
</ul>
</li>
<li>Read support for the following compression types:

<ul>
<li>Uncompressed</li>
<li>RLE (PackBits)</li>
</ul>
</li>
<li>Layer support

<ul>
<li>Image layers only, in all of the above types</li>
</ul>
</li>
<li>Thumbnail support

<ul>
<li>JPEG</li>
<li>RAW (RGB)</li>
</ul>
</li>
<li>Support for "Large Document Format" (PSB)</li>
<li>Native metadata support</li>
</ul>

<h4>
<a id="aldusadobe-tagged-image-file-format-tiff" class="anchor" href="#aldusadobe-tagged-image-file-format-tiff" aria-hidden="true"><span class="octicon octicon-link"></span></a>TIFF - Aldus/Adobe Tagged Image File Format</h4>

<ul>
<li>Read support for the following "Baseline" TIFF file types:

<ul>
<li>Class B (Bi-level), all relevant compression types, 1 bit per sample</li>
<li>Class G (Gray), all relevant compression types, 2, 4, 8, 16 or 32 bits per sample, unsigned integer</li>
<li>Class P (Palette/indexed color), all relevant compression types, 1, 2, 4, 8 or 16 bits per sample, unsigned integer</li>
<li>Class R (RGB), all relevant compression types, 8 or 16 bits per sample, unsigned integer</li>
</ul>
</li>
<li>Read support for the following TIFF extensions:

<ul>
<li>Tiling</li>
<li>LZW Compression (type 5)</li>
<li>"Old-style" JPEG Compression (type 6), as a best effort, as the spec is not well-defined</li>
<li>JPEG Compression (type 7)</li>
<li>ZLib (aka Adobe-style Deflate) Compression (type 8)</li>
<li>Deflate Compression (type 32946)</li>
<li>Horizontal differencing Predictor (type 2) for LZW, ZLib, Deflate and PackBits compression</li>
<li>Alpha channel (ExtraSamples type 1/Associated Alpha)</li>
<li>CMYK data (PhotometricInterpretation type 5/Separated)</li>
<li>YCbCr data (PhotometricInterpretation type 6/YCbCr) for JPEG</li>
<li>Planar data (PlanarConfiguration type 2/Planar)</li>
<li>ICC profiles (ICCProfile)</li>
<li>BitsPerSample values up to 16 for most PhotometricInterpretations</li>
<li>Multiple images (pages) in one file</li>
</ul>
</li>
<li>Write support for most "Baseline" TIFF options

<ul>
<li>Uncompressed, PackBits, ZLib and Deflate </li>
<li>Currently missing the CCITT fax encodings</li>
<li>Additional support for LZW and JPEG (type 7) compressions</li>
<li>Horizontal differencing Predictor (type 2) for LZW, ZLib, Deflate</li>
</ul>
</li>
</ul>

<p>Legacy formats</p>

<h4>
<a id="commodore-amigaelectronic-arts-interchange-file-format-iff" class="anchor" href="#commodore-amigaelectronic-arts-interchange-file-format-iff" aria-hidden="true"><span class="octicon octicon-link"></span></a>IFF - Commodore Amiga/Electronic Arts Interchange File Format</h4>

<ul>
<li>Legacy format, allows reading popular image format from the Commodore Amiga computer.</li>
<li>Read support for the following file types:

<ul>
<li>ILBM Indexed color, 1-8 interleaved bit planes, including 6 bit EHB</li>
<li>ILBM  Gray, 8 bit interleaved bit planes</li>
<li>ILBM RGB, 24 and 32 bit interleaved bit planes</li>
<li>ILBM HAM6 and HAM8</li>
<li>PBM Indexed color, 1-8 bit,</li>
<li>PBM Gray, 8 bit</li>
<li>PBM RGB, 24 and 32 bit</li>
<li>PBM HAM6 and HAM8</li>
</ul>
</li>
<li>Write support

<ul>
<li>ILBM Indexed color, 1-8 bits per sample, 8 bit gray, 24 and 32 bit true color.</li>
</ul>
</li>
<li>Support for the following compression types (read/write):

<ul>
<li>Uncompressed</li>
<li>RLE (PackBits)</li>
</ul>
</li>
</ul>

<h4>
<a id="zsoft-paintbrush-format-pcx" class="anchor" href="#zsoft-paintbrush-format-pcx" aria-hidden="true"><span class="octicon octicon-link"></span></a>PCX - ZSoft Paintbrush Format <em>3.1</em>
</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>Indexed color, 1, 2, 4 or 8 bits per pixel, bit planes or interleaved</li>
<li>Grayscale, 8 bits per pixel</li>
<li>Color (RGB), 8 bits per pixel component</li>
</ul>
</li>
<li>Read support for DCX (multi-page) fax format, containing any of the above types</li>
<li>Support for the following compression types:

<ul>
<li>Uncompressed (experimental)</li>
<li>RLE compressed</li>
</ul>
</li>
<li>Standard metadata support</li>
</ul>

<h4>
<a id="apple-mac-paint-picture-format-pict" class="anchor" href="#apple-mac-paint-picture-format-pict" aria-hidden="true"><span class="octicon octicon-link"></span></a>PICT - Apple Mac Paint Picture Format</h4>

<ul>
<li>Legacy format, especially useful for reading OS X clipboard data.</li>
<li>Read support for the following file types:

<ul>
<li>QuickDraw (format support is not complete, but supports most OS X clipboard data as well as RGB pixel data)</li>
<li>QuickDraw bitmap</li>
<li>QuickDraw pixmap</li>
<li>QuickTime stills</li>
</ul>
</li>
<li>Write support for RGB pixel data:

<ul>
<li>QuickDraw pixmap</li>
</ul>
</li>
</ul>

<h4>
<a id="silicon-graphics-image-format-sgi" class="anchor" href="#silicon-graphics-image-format-sgi" aria-hidden="true"><span class="octicon octicon-link"></span></a>SGI - Silicon Graphics Image Format <em>3.1</em>
</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>1, 2, 3 or 4 channel image data</li>
<li>8 or 16 bits per pixel component</li>
</ul>
</li>
<li>Support for the following compression types:

<ul>
<li>Uncompressed</li>
<li>RLE compressed</li>
</ul>
</li>
<li>Standard metadata support</li>
</ul>

<h4>
<a id="truevision-tga-image-format-tga" class="anchor" href="#truevision-tga-image-format-tga" aria-hidden="true"><span class="octicon octicon-link"></span></a>TGA - Truevision TGA Image Format <em>3.1</em>
</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>ColorMapped</li>
<li>Monochrome</li>
<li>TrueColor</li>
</ul>
</li>
<li>Support for the following compression types:

<ul>
<li>Uncompressed</li>
<li>RLE compressed</li>
</ul>
</li>
<li>Standard metadata support</li>
</ul>

<p>Icon/other formats</p>

<h4>
<a id="apple-icon-image-icns" class="anchor" href="#apple-icon-image-icns" aria-hidden="true"><span class="octicon octicon-link"></span></a>ICNS - Apple Icon Image</h4>

<ul>
<li>Read support for the following icon types:

<ul>
<li>All known "native" icon types</li>
<li>Large PNG encoded icons</li>
<li>Large JPEG 2000 encoded icons (requires JPEG 2000 ImageIO plugin or fallback to <code>sips</code> command line tool)</li>
</ul>
</li>
</ul>

<h4>
<a id="ms-windows-icon-and-cursor-formats-ico--cur" class="anchor" href="#ms-windows-icon-and-cursor-formats-ico--cur" aria-hidden="true"><span class="octicon octicon-link"></span></a>ICO &amp; CUR - MS Windows Icon and Cursor Formats</h4>

<ul>
<li>Read support for the following file types:

<ul>
<li>ICO Indexed color, 1, 4 and 8 bit</li>
<li>ICO RGB, 16, 24 and 32 bit</li>
<li>CUR Indexed color, 1, 4 and 8 bit</li>
<li>CUR RGB, 16, 24 and 32 bit</li>
</ul>
</li>
<li><em>3.1</em> Note: These formats are now part of the BMP plugin</li>
</ul>

<h4>
<a id="ms-windows-thumbs-db-thumbsdb" class="anchor" href="#ms-windows-thumbs-db-thumbsdb" aria-hidden="true"><span class="octicon octicon-link"></span></a>Thumbs.db - MS Windows Thumbs DB</h4>

<ul>
<li>Read support</li>
</ul>

<p>Other formats, using 3rd party libraries</p>

<h4>
<a id="scalable-vector-graphics-svg" class="anchor" href="#scalable-vector-graphics-svg" aria-hidden="true"><span class="octicon octicon-link"></span></a>SVG - Scalable Vector Graphics</h4>

<ul>
<li>Read-only support using Batik</li>
</ul>

<h4>
<a id="ms-windows-metafile-wmf" class="anchor" href="#ms-windows-metafile-wmf" aria-hidden="true"><span class="octicon octicon-link"></span></a>WMF - MS Windows MetaFile</h4>

<ul>
<li>Limited read-only support using Batik</li>
</ul>

<h2>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic usage</h2>

<p>Most of the time, all you need to do is simply include the plugins in your project and write:</p>

<pre><code>BufferedImage image = ImageIO.read(file);
</code></pre>

<p>This will load the first image of the file, entirely into memory.</p>

<p>The basic and simplest form of writing is:</p>

<pre><code>if (!ImageIO.write(image, format, file)) {
   // Handle image not written case
}
</code></pre>

<p>This will write the entire image into a single file, using the default settings for the given format.</p>

<p>The plugins are discovered automatically at run time. See the <a href="#faq">FAQ</a> for more info on how this mechanism works.</p>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced usage</h2>

<p>If you need more control of read parameters and the reading process, the common idiom for reading is something like:</p>

<pre><code>// Create input stream
ImageInputStream input = ImageIO.createImageInputStream(file);

try {
    // Get the reader
    Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(input);

    if (!readers.hasNext()) {
        throw new IllegalArgumentException("No reader for: " + file);
    }

    ImageReader reader = readers.next();

    try {
        reader.setInput(input);

        // Optionally, listen for read warnings, progress, etc.
        reader.addIIOReadWarningListener(...);
        reader.addIIOReadProgressListener(...);

        ImageReadParam param = reader.getDefaultReadParam();

        // Optionally, control read settings like sub sampling, source region or destination etc.
        param.setSourceSubsampling(...);
        param.setSourceRegion(...);
        param.setDestination(...);
        // ...

        // Finally read the image, using settings from param
        BufferedImage image = reader.read(0, param);

        // Optionally, read thumbnails, meta data, etc...
        int numThumbs = reader.getNumThumbnails(0);
        // ...
    }
    finally {
        // Dispose reader in finally block to avoid memory leaks
        reader.dispose();
    }
}
finally {
    // Close stream in finally block to avoid resource leaks
    input.close();
}
</code></pre>

<p>Query the reader for source image dimensions using <code>reader.getWidth(n)</code> and <code>reader.getHeight(n)</code> without reading the
entire image into memory first.</p>

<p>It's also possible to read multiple images from the same file in a loop, using <code>reader.getNumImages()</code>.</p>

<p>If you need more control of write parameters and the writing process, the common idiom for writing is something like:</p>

<pre><code>// Get the writer
Iterator&lt;ImageWriter&gt; writers = ImageIO.getImageWritersByFormatName(format);

if (!writers.hasNext()) {
    throw new IllegalArgumentException("No writer for: " + format);
}

ImageWriter writer = writers.next();

try {
    // Create output stream
    ImageOutputStream output = ImageIO.createImageOutputStream(file);

    try {
        writer.setOutput(output);

        // Optionally, listen to progress, warnings, etc.

        ImageWriteParam param = writer.getDefaultWriteParam();

        // Optionally, control format specific settings of param (requires casting), or
        // control generic write settings like sub sampling, source region, output type etc.

        // Optionally, provide thumbnails and image/stream metadata
        writer.write(..., new IIOImage(..., image, ...), param);
    }
    finally {
        // Close stream in finally block to avoid resource leaks
        output.close();
    }
}
finally {
    // Dispose writer in finally block to avoid memory leaks
    writer.dispose();
}
</code></pre>

<p>For more advanced usage, and information on how to use the ImageIO API, I suggest you read the
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/imageio/spec/imageio_guideTOC.fm.html">Java Image I/O API Guide</a>
from Oracle.</p>

<h4>
<a id="deploying-the-plugins-in-a-web-app" class="anchor" href="#deploying-the-plugins-in-a-web-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deploying the plugins in a web app</h4>

<p>Because the <code>ImageIO</code> plugin registry (the <code>IIORegistry</code>) is "VM global", it doesn't by default work well with
servlet contexts. This is especially evident if you load plugins from the <code>WEB-INF/lib</code> or <code>classes</code> folder.
Unless you add <code>ImageIO.scanForPlugins()</code> somewhere in your code, the plugins might never be available at all.</p>

<p>I addition, servlet contexts dynamically loads and unloads classes (using a new class loader per context).
If you restart your application, old classes will by default remain in memory forever (because the next time
<code>scanForPlugins</code> is called, it's another <code>ClassLoader</code> that scans/loads classes, and thus they will be new instances
in the registry). If a read is attempted using one of the remaining "old" readers, weird exceptions
(like <code>NullPointerException</code>s when accessing <code>static final</code> initialized fields or <code>NoClassDefFoundError</code>s 
for uninitialized inner classes) may occur.</p>

<p>To work around both the discovery problem and the resource leak,
it is <em>strongly recommended</em> to use the <code>IIOProviderContextListener</code> that implements
dynamic loading and unloading of ImageIO plugins for web applications.</p>

<pre><code>&lt;web-app ...&gt;

...

    &lt;listener&gt;
        &lt;display-name&gt;ImageIO service provider loader/unloader&lt;/display-name&gt;
        &lt;listener-class&gt;com.twelvemonkeys.servlet.image.IIOProviderContextListener&lt;/listener-class&gt;
    &lt;/listener&gt;

...

&lt;/web-app&gt;
</code></pre>

<p>Loading plugins from <code>WEB-INF/lib</code> without the context listener installed is unsupported and will not work correctly.</p>

<p>The context listener has no dependencies to the TwelveMonkeys ImageIO plugins, and may be used with JAI ImageIO 
or other ImageIO plugins as well.</p>

<p>Another safe option, is to place the JAR files in the application server's shared or common lib folder. </p>

<h4>
<a id="using-the-resampleop" class="anchor" href="#using-the-resampleop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the ResampleOp</h4>

<p>The library comes with a resampling (image resizing) operation, that contains many different algorithms
to provide excellent results at reasonable speed.</p>

<pre><code>import com.twelvemonkeys.image.ResampleOp;

...

BufferedImage input = ...; // Image to resample
int width, height = ...; // new width/height

BufferedImageOp resampler = new ResampleOp(width, height, ResampleOp.FILTER_LANCZOS); // A good default filter, see class documentation for more info
BufferedImage output = resampler.filter(input, null);
</code></pre>

<h4>
<a id="using-the-diffusiondither" class="anchor" href="#using-the-diffusiondither" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the DiffusionDither</h4>

<p>The library comes with a dithering operation, that can be used to convert <code>BufferedImage</code>s to <code>IndexColorModel</code> using
Floyd-Steinberg error-diffusion dither.</p>

<pre><code>import com.twelvemonkeys.image.DiffusionDither;

...

BufferedImage input = ...; // Image to dither

BufferedImageOp ditherer = new DiffusionDither();
BufferedImage output = ditherer.filter(input, null);
</code></pre>

<h2>
<a id="building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h2>

<p>Download the project (using <a href="http://git-scm.com/downloads">Git</a>):</p>

<pre><code>$ git clone git@github.com:haraldk/TwelveMonkeys.git
</code></pre>

<p>This should create a folder named <code>TwelveMonkeys</code> in your current directory. Change directory to the <code>TwelveMonkeys</code>
folder, and issue the command below to build.</p>

<p>Build the project (using <a href="http://maven.apache.org/download.cgi">Maven</a>):</p>

<pre><code>$ mvn package
</code></pre>

<p>Currently, the only supported JDK for making a build is Oracle JDK 7.x. </p>

<p>It's possible to build using OpenJDK, but some tests will fail due to some minor differences between the color management systems used. You will need to either disable the tests in question, or build without tests altogether. To build using JDK 8, you need to pass <code>-Dsun.java2d.cmm=sun.java2d.cmm.kcms.KcmsServiceProvider</code> to revert to the color manangement system used in Java 7.</p>

<p>Because the unit tests needs quite a bit of memory to run, you might have to set the environment variable <code>MAVEN_OPTS</code>
to give the Java process that runs Maven more memory. I suggest something like <code>-Xmx512m -XX:MaxPermSize=256m</code>.</p>

<p>Optionally, you can install the project in your local Maven repository using:</p>

<pre><code>$ mvn install
</code></pre>

<h2>
<a id="installing" class="anchor" href="#installing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing</h2>

<p>To install the plug-ins,
either use Maven and add the necessary dependencies to your project,
or manually add the needed JARs along with required dependencies in class-path.</p>

<p>The ImageIO registry and service lookup mechanism will make sure the plugins are available for use.</p>

<p>To verify that the JPEG plugin is installed and used at run-time, you could use the following code:</p>

<pre><code>Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReadersByFormatName("JPEG");
while (readers.hasNext()) {
    System.out.println("reader: " + readers.next());
}
</code></pre>

<p>The first line should print:</p>

<pre><code>reader: com.twelvemonkeys.imageio.plugins.jpeg.JPEGImageReader@somehash
</code></pre>

<h4>
<a id="maven-dependency-example" class="anchor" href="#maven-dependency-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maven dependency example</h4>

<p>To depend on the JPEG and TIFF plugin using Maven, add the following to your POM:</p>

<pre><code>...
&lt;dependencies&gt;
    ...
    &lt;dependency&gt;
        &lt;groupId&gt;com.twelvemonkeys.imageio&lt;/groupId&gt;
        &lt;artifactId&gt;imageio-jpeg&lt;/artifactId&gt;
        &lt;version&gt;3.1.0&lt;/version&gt; &lt;!-- Alternatively, build your own version --&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.twelvemonkeys.imageio&lt;/groupId&gt;
        &lt;artifactId&gt;imageio-tiff&lt;/artifactId&gt;
        &lt;version&gt;3.1.0&lt;/version&gt; &lt;!-- Alternatively, build your own version --&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<h4>
<a id="manual-dependency-example" class="anchor" href="#manual-dependency-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manual dependency example</h4>

<p>To depend on the JPEG and TIFF plugin in your IDE or program, add all of the following JARs to your class path:</p>

<pre><code>twelvemonkeys-common-lang-3.1.0.jar
twelvemonkeys-common-io-3.1.0.jar
twelvemonkeys-common-image-3.1.0.jar
twelvemonkeys-imageio-core-3.1.0.jar
twelvemonkeys-imageio-metadata-3.1.0.jar
twelvemonkeys-imageio-jpeg-3.1.0.jar
twelvemonkeys-imageio-tiff-3.1.0.jar
</code></pre>

<h3>
<a id="links-to-prebuilt-binaries" class="anchor" href="#links-to-prebuilt-binaries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Links to prebuilt binaries</h3>

<h5>
<a id="user-content-latest-version-31x" class="anchor" href="#latest-version-31x" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest version (3.1.x)</h5>

<p>Requires Java 7 or later.</p>

<p>Common dependencies</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-lang/3.1.0/common-lang-3.1.0.jar">common-lang-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-io/3.1.0/common-io-3.1.0.jar">common-io-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-image/3.1.0/common-image-3.1.0.jar">common-image-3.1.0.jar</a></li>
</ul>

<p>ImageIO dependencies</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-core/3.1.0/imageio-core-3.1.0.jar">imageio-core-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-metadata/3.1.0/imageio-metadata-3.1.0.jar">imageio-metadata-3.1.0.jar</a></li>
</ul>

<p>ImageIO plugins</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-bmp/3.1.0/imageio-bmp-3.1.0.jar">imageio-bmp-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-jpeg/3.1.0/imageio-jpeg-3.1.0.jar">imageio-jpeg-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-tiff/3.1.0/imageio-tiff-3.1.0.jar">imageio-tiff-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-pnm/3.1.0/imageio-pnm-3.1.0.jar">imageio-pnm-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-psd/3.1.0/imageio-psd-3.1.0.jar">imageio-psd-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-iff/3.1.0/imageio-iff-3.1.0.jar">imageio-iff-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-pcx/3.1.0/imageio-pcx-3.1.0.jar">imageio-pcx-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-pict/3.1.0/imageio-pict-3.1.0.jar">imageio-pict-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-sgi/3.1.0/imageio-sgi-3.1.0.jar">imageio-sgi-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-tga/3.1.0/imageio-tga-3.1.0.jar">imageio-tga-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-icns/3.1.0/imageio-icns-3.1.0.jar">imageio-icns-3.1.0.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-thumbsdb/3.1.0/imageio-thumbsdb-3.1.0.jar">imageio-thumbsdb-3.1.0.jar</a></li>
</ul>

<p>ImageIO plugins requiring 3rd party libs</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-batik/3.1.0/imageio-batik-3.1.0.jar">imageio-batik-3.1.0.jar</a></li>
</ul>

<p>Photoshop Path support for ImageIO</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-clippath/3.1.0/imageio-clippath-3.1.0.jar">imageio-clippath-3.1.0.jar</a></li>
</ul>

<p>Servlet support</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/servlet/servlet/3.1.0/servlet-3.1.0.jar">servlet-3.1.0.jar</a></li>
</ul>

<h5>
<a id="user-content-old-version-30x" class="anchor" href="#old-version-30x" aria-hidden="true"><span class="octicon octicon-link"></span></a>Old version (3.0.x)</h5>

<p>Use this version for projects that requires Java 6 or need the JMagick support. <em>Does not support Java 8</em>. </p>

<p>Common dependencies</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-lang/3.0.2/common-lang-3.0.2.jar">common-lang-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-io/3.0.2/common-io-3.0.2.jar">common-io-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/common/common-image/3.0.2/common-image-3.0.2.jar">common-image-3.0.2.jar</a></li>
</ul>

<p>ImageIO dependencies</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-core/3.0.2/imageio-core-3.0.2.jar">imageio-core-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-metadata/3.0.2/imageio-metadata-3.0.2.jar">imageio-metadata-3.0.2.jar</a></li>
</ul>

<p>ImageIO plugins</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-jpeg/3.0.2/imageio-jpeg-3.0.2.jar">imageio-jpeg-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-tiff/3.0.2/imageio-tiff-3.0.2.jar">imageio-tiff-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-psd/3.0.2/imageio-psd-3.0.2.jar">imageio-psd-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-pict/3.0.2/imageio-pict-3.0.2.jar">imageio-pict-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-iff/3.0.2/imageio-iff-3.0.2.jar">imageio-iff-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-icns/3.0.2/imageio-icns-3.0.2.jar">imageio-icns-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-ico/3.0.2/imageio-ico-3.0.2.jar">imageio-ico-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-thumbsdb/3.0.2/imageio-thumbsdb-3.0.2.jar">imageio-thumbsdb-3.0.2.jar</a></li>
</ul>

<p>ImageIO plugins requiring 3rd party libs</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-batik/3.0.2/imageio-batik-3.0.2.jar">imageio-batik-3.0.2.jar</a></li>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/imageio/imageio-jmagick/3.0.2/imageio-jmagick-3.0.2.jar">imageio-jmagick-3.0.2.jar</a></li>
</ul>

<p>Servlet support</p>

<ul>
<li><a href="http://search.maven.org/remotecontent?filepath=com/twelvemonkeys/servlet/servlet/3.0.2/servlet-3.0.2.jar">servlet-3.0.2.jar</a></li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>The project is distributed under the OSI approved <a href="http://opensource.org/licenses/BSD-3-Clause">BSD license</a>:</p>

<pre><code>Copyright (c) 2008-2015, Harald Kuhr
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

o Redistributions of source code must retain the above copyright
  notice, this list of conditions and the following disclaimer.

o Redistributions in binary form must reproduce the above copyright
  notice, this list of conditions and the following disclaimer in the
  documentation and/or other materials provided with the distribution.

o Neither the name "TwelveMonkeys" nor the
  names of its contributors may be used to endorse or promote products
  derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</code></pre>

<h2>
<a id="faq" class="anchor" href="#faq" aria-hidden="true"><span class="octicon octicon-link"></span></a>FAQ</h2>

<p>q: How do I use it?</p>

<p>a: The easiest way is to build your own project using Maven, and just add dependencies to the specific plug-ins you need.
 If you don't use Maven, make sure you have all the necessary JARs in classpath. See the Install section above.</p>

<p>q: What changes do I have to make to my code in order to use the plug-ins?</p>

<p>a: The short answer is: None. For basic usage, like <code>ImageIO.read(...)</code> or <code>ImageIO.getImageReaders(...)</code>, there is no need
to change your code. Most of the functionality is available through standard ImageIO APIs, and great care has been taken
 not to introduce extra API where none is necessary.</p>

<p>Should you want to use very specific/advanced features of some of the formats, you might have to use specific APIs, like
   setting base URL for an SVG image that consists of multiple files,
   or controlling the output compression of a TIFF file.</p>

<p>q: How does it work?</p>

<p>a: The TwelveMonkeys ImageIO project contains plug-ins for ImageIO. ImageIO uses a service lookup mechanism, to discover plug-ins at runtime. </p>

<p>All you have have to do, is to make sure you have the TwelveMonkeys JARs in your classpath.</p>

<p>You can read more about the registry and the lookup mechanism in the <a href="http://docs.oracle.com/javase/7/docs/api/javax/imageio/spi/IIORegistry.html">IIORegistry API doc</a>.</p>

<p>The fine print: The TwelveMonkeys service providers for JPEG, BMP and TIFF, overrides the onRegistration method, and
utilizes the pairwise partial ordering mechanism of the <code>IIOServiceRegistry</code> to make sure it is installed before
the Sun/Oracle provided <code>JPEGImageReader</code> and <code>BMPImageReader</code>, and the Apple provided <code>TIFFImageReader</code> on OS X, 
respectively. Using the pairwise ordering will not remove any functionality form these implementations, but in most 
cases you'll end up using the TwelveMonkeys plug-ins instead.</p>

<p>q: What about JAI? Several of the formats are already supported by JAI.</p>

<p>a: While JAI (and jai-imageio in particular) have support for some of the formats, JAI has some major issues.
The most obvious being:</p>

<ul>
<li>It's not actively developed. No issues has been fixed for years.</li>
<li>To get full format support, you need native libs.
Native libs does not exist for several popular platforms/architectures, and further the native libs are not open source.
Some environments may also prevent deployment of native libs, which brings us back to square one.</li>
</ul>

<p>q: What about JMagick or IM4Java? Can't you just use what´s already available?</p>

<p>a: While great libraries with a wide range of formats support, the ImageMagick-based libraries has some disadvantages
compared to ImageIO.</p>

<ul>
<li>No real stream support, these libraries only work with files.</li>
<li>No easy access to pixel data through standard Java2D/BufferedImage API.</li>
<li>Not a pure Java solution, requires system specific native libs.</li>
</ul>

<hr>

<p>We did it</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/haraldk">haraldk</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>